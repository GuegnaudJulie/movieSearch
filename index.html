<!DOCTYPE HTML>
<!--
	Prologue by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>7e art</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body>

		<!-- Header -->
			<div id="header">

				<div class="top">

					<!-- Logo -->
						<div id="logo">
							<span class="image avatar48"><img src="images/avatar.jpg" alt="" /></span>
							<h1 id="title">A la recherche du 7e art</h1>
							<p>Recherche de film par titre, par participant et par année.</p>
						</div>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="#top" id="top-link" class="skel-layers-ignoreHref" onClick="afficher_cacher()" ><span class="icon fa-home">Recherche</span></a></li>
								<div id="recherche">
									<div id="recherche_detail">
										<p class="nav_recherche"><span class="sousligne"> Recherche par détail </span><br/>
											<select id="liste_type_membre" name="Type" size="1">
												<option class="type_membre">Acteur
												<option class="type_membre">Réalisateur
												<option class="type_membre">Producteur
											</select>
											<input type="text" class="nom_membre" id="first_input" name="nom_membre" placeholder="nom">
											<span id="ajout"></span>
											<br/>
											<img src="/images/add-icon.png" id="ajout_recherche" onClick="ajouter()">
											<br/>
											<span id="date_film">Date de réalisation: de </span>
											<input type="text" class="date_debut" name="date_debut" placeholder="début"> à
											<input type="text" class="date_fin" name="date_fin" placeholder="fin">
										</p>
									</div>
									<div id="recherche_titre">
										<p class="nav_recherche"><span class="sousligne">Recherche par titre</span><br/>
											<select name="select" id="select_movies">

											</select>
											<input type="hidden" id="id_titre" name="id_titre" >
										</p>
									</div>
									<button id="bouton_recherche" onClick="recherche()">Rechercher</button>
									<button id="bouton_reset" onClick="supprimer()">Reset</button>
								</div>
								<li><a href="#about" id="about-link" class="skel-layers-ignoreHref"><span class="icon fa-user">About Us</span></a></li>
								<li><a href="#contact" id="contact-link" class="skel-layers-ignoreHref"><span class="icon fa-envelope">Contact</span></a></li>
							</ul>
						</nav>

				</div>

				<div class="bottom">

					<!-- Social Icons -->
						<ul class="icons">
							<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
							<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
							<li><a href="#" class="icon fa-envelope"><span class="label">Email</span></a></li>
						</ul>
				</div>

			</div>

		<!-- Main -->
			<div id="main">

				<!-- Intro -->
					<section id="top" class="one dark cover">
						<div class="container">

							<header>
								<h2 class="alt">Bienvenue sur le site <strong>à la recherche du 7e art</strong>.</h2>
							</header>

							<footer>
								<a href="#portfolio" class="button scrolly">Les films</a>
							</footer>

						</div>
					</section>

				<!-- Portfolio -->
					<section id="portfolio" class="two">
						<div class="container">

							<header>
								<h2>Films</h2>
							</header>

							<p>Insérer ici le zolie arbre <3 </p>

						</div>
					</section>

				<!-- About Me -->
					<section id="about" class="three">
						<div class="container">

							<header>
								<h2>About Us</h2>
							</header>

							<a href="#" class="image featured"><img src="images/pic08.jpg" alt="" /></a>

							<p>Ce site a été conçu pour le hackaton 2016 à l'occasion des 5 ans de l'ISTIC. L'équipe est constituer de 3 membres de M2 MIAGE : Julie Guégnaud, Julien Moulin et Yoann ... (J'arrive pas à écrire ton nom).</p>

						</div>
					</section>

				<!-- Contact -->
					<section id="contact" class="four">
						<div class="container">

							<header>
								<h2>Contact</h2>
							</header>

							<form method="post" action="#">
								<div class="row">
									<div class="6u 12u$(mobile)"><input type="text" name="name" placeholder="Nom" /></div>
									<div class="6u$ 12u$(mobile)"><input type="text" name="email" placeholder="Email" /></div>
									<div class="12u$">
										<textarea name="message" placeholder="Message"></textarea>
									</div>
									<div class="12u$">
										<input type="submit" value="Envoyer le message" />
									</div>
								</div>
							</form>

						</div>
					</section>

			</div>

		<!-- Footer -->
			<div id="footer">

				<!-- Copyright -->
					<ul class="copyright">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollzer.min.js"></script>
			<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

			<script type="text/javascript">

				$("#recherche").slideUp();
				var cacher = true;

				function afficher_cacher()
				{	
					if(cacher){
						$("#recherche").slideDown();
						cacher = false;
					}
				    	
					else{
						$("#recherche").slideUp();
						cacher = true;
					}
				};

				function ajouter(){
					$("#ajout").append('<br/>'+
						'<select id="liste_type_membre" name="Type" size="1">' +
							'<option class="type_membre">Acteur' +
							'<option class="type_membre">Réalisateur' +
							'<option class="type_membre">Producteur' +
						'</select>' +
						'<input type="text" class="nom_membre" placeholder="nom">');
				};

				$("#select_movies").select2({

					ajax: {
						dataType: 'json',
				        url: "https://api.themoviedb.org/3/search/movie",
				        data: function(params){
				        	return{
				        		query: params.term,
				        		api_key: "a1c65ce9d24b2d4ed117f413bb94a122"
				        	}
				        },
				        /*success: function(data) {
				            console.log(data)
				            for (var i = 0; i < data['results'].length; i++) {
				                var result = data['results'][i]
				                console.log(result['id']+" - "+result['title'])
				            }
				        },*/

						processResults: function (data, params) {
							// parse the results into the format expected by Select2
							// since we are using custom formatting functions we do not need to
							// alter the remote JSON data, except to indicate that infinite
							// scrolling can be used
							console.log(data)
							console.log(params)
							params.page = params.page || 1;
					
							return {
								results: data.results,
								pagination: {
									more: (params.page * 30) < data.total_count
								}
							};
						},
						cache: true
					},

					escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
					minimumInputLength: 1,
					templateResult: formatRepo, // omitted for brevity, see the source of this page
					templateSelection: formatRepoSelection // omitted for brevity, see the source of this page
				});
				
				function formatRepo(data){
					console.log(data)
					if(data.loading) return data.title;

					markup = "<p class='result_movies'>"+data.title+"</p>";
					return markup;
				}

				function formatRepoSelection(data){
					$("#id_titre").val(data.id);
					return data.title;
				}

				function supprimer(){
					$("#ajout").html("");
					$("#first_input").val("");
					$("#nom_titre").val("");
				};

				function recherche(){if ($(".nom_membre").val() != ""){
						vue_arbre();
					}
					else if ($("#nom_titre").val() != "") {
						vue_film();
					};
					
				}

				function vue_arbre(){
					afficher_cacher();
					//$("#portfolio").load('arbre_filmographie.php');
				};

				function vue_film(){
					afficher_cacher();
					$("#portfolio").load('detail_film.html');
				};

			</script>

	</body>
</html>